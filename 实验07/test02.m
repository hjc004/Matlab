clear
clc
I = imread('cameraman.tif');
I = im2double(I);   %转换图像矩阵为双精度
T1 = dctmtx(2);
T2 = dctmtx(8);    %产生二维DCT变换矩阵
T3 = dctmtx(32);
B1 = blkproc(I,[2 2],'P1*x*P1',T1,T1');
B2 = blkproc(I,[8 8],'P1*x*P1',T2,T2');
B3 = blkproc(I,[32 32],'P1*x*P1',T3,T3');
mask1 = [1 0
         0 0];
mask2 = [1 1 1 1 0 0 0 0
         1 1 1 0 0 0 0 0
         1 1 0 0 0 0 0 0
         1 0 0 0 0 0 0 0
         0 0 0 0 0 0 0 0
         0 0 0 0 0 0 0 0
         0 0 0 0 0 0 0 0
         0 0 0 0 0 0 0 0];   %二值掩膜，用来压缩DCT系数
mask3 = [1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
         1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
         1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
         1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
         1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
         1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
         1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
         1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
         1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
         1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
         1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
         1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
         1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
         1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
         1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
         1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];
J1 = blkproc(B1,[2 2],'P1.*x',mask1);    %只保留DCT变换的10个系数
J2 = blkproc(B2,[8 8],'P1.*x',mask2);
J3 = blkproc(B3,[32 32],'P1*x',mask3);
K1 = blkproc(B2,[2 2],'P1*x*P1',T1',T1);   %重构图像
K2 = blkproc(B2,[8 8],'P1*x*P1',T2',T2);
K3 = blkproc(B3,[32 32],'P1*x*P1',T3',T3);
figure,subplot(1,3,1),imshow(K1);title('2x2');
       subplot(1,3,2),imshow(K2);title('8x8');
       subplot(1,3,3),imshow(K3);title('32x32');